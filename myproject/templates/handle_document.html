{% load static %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<title>AI-Hobbyist</title>

<div class="container mt-4">
    {% if error %}
    <p style="color: red;">{{ error }}</p>
    {% endif %}

    {% if not word_count and not problem_statement %}
    <p>Upload your PDF and let us help you unlock a summary, so you can effortlessly create your own problem statement!</p>

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}
        <input type="file" name="document" accept=".pdf" required>
        <input type="submit" value="Let’s Process Your Document">
    </form>
    {% endif %}

    {% if summary %}
    <b>Here’s Your Document’s Summary:</b>
    <p style="text-align: justify;">{{ summary }}</p>
    {% endif %}

    {% if word_count %}
    <form method="POST">
        {% csrf_token %}
        <b>Choose the words that will bring your problem statement to life:</b><br/>
        {% for word, count in word_count.items %}
        <div class="form-check d-inline-block mr-3">
            <input type="checkbox" class="form-check-input" name="selected_words" value="{{ word }}" id="word_{{ forloop.counter0 }}">
            <label class="form-check-label" for="word_{{ forloop.counter0 }}">{{ word }}</label>
        </div>
        {% endfor %}
        <br /><br />
        <p><b>What’s your style? How would you like your problem statement to shine?</b></p>
        <label class="radio-inline">
            <input type="radio" name="task" value="classify" required> Let's Classify It...
        </label>
        <label class="radio-inline">
            <input type="radio" name="task" value="regress" required> Let’s Regress and Predict...
        </label>
        <br /><br />
        <p><b>How would you like to craft your statement?</b></p>
        <label class="radio-inline">
            <input type="radio" name="ps_choice" value="nlg" required> Classic (Normal NLG)
        </label>
        <label class="radio-inline">
            <input type="radio" name="ps_choice" value="ai" required> AI Magic (AI-Generated)
        </label>
        <br /><br />
        <input type="submit" class="btn btn-primary" value="Generate My Beautiful Problem Statement">
    </form>
    {% endif %}

    {% if problem_statement %}
    <div class="alert alert-success mt-4">
        <p><strong>Your Problem Statement:</strong></p>
        <pre>{{ problem_statement }}</pre>
    </div>
    <div class="alert alert-warning">
        <p><strong>Note:</strong> The generated problem statement is based on the selected data and may not always be
            perfect. Please refine and verify it as needed.</p>
    </div>
    <div class="mt-4">
        <a href="{% url 'eda' %}" class="btn btn-secondary">Feeling inspired? Let’s perform EDA now!</a>
    </div>
    {% endif %}
    <a href="{% url 'index' %}">Not quite ready? Head back and brainstorm some more!</a>
</div>
